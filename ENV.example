# Alexandria Library - Environment Variables
# Copy this file to .env and fill in your values

# ============================================================================
# REQUIRED - App will not start without these
# ============================================================================

# Database connection string
# Local SQLite (development):
DATABASE_URL=sqlite:///./data/alexandria.db
# Production Postgres (Supabase/Render):
# DATABASE_URL=postgresql://user:password@host:5432/alexandria

# Session secret key (generate with: openssl rand -hex 32)
# CRITICAL: Change this in production!
SESSION_SECRET=your-secret-key-change-in-production

# Environment mode
# Options: development, production
ENV=development

# ============================================================================
# OPTIONAL - App will work without these (mock mode)
# ============================================================================

# OpenAI API key for LLM-powered agents
# If not set: agents run in mock/keyword mode
# Get key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-...

# OpenAI model to use (default: gpt-4o-mini)
OPENAI_MODEL=gpt-4o-mini

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Use mock agents instead of LLM (faster, no API costs)
# Options: true, false
USE_MOCK_AGENTS=true

# Enable debug mode (verbose logging)
# Options: true, false
DEBUG=true

# ============================================================================
# SESSION SETTINGS
# ============================================================================

# Session cookie name
SESSION_COOKIE_NAME=alexandria_session

# Session max age in seconds (default: 7 days)
SESSION_MAX_AGE=604800

# ============================================================================
# DEPLOYMENT SETTINGS (Production only)
# ============================================================================

# Trusted proxy headers (if behind reverse proxy like Nginx)
# TRUSTED_HOST=yourdomain.com

# Force HTTPS redirects
# FORCE_HTTPS=true

# Allowed CORS origins (comma-separated)
# CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ============================================================================
# ADMIN SETTINGS
# ============================================================================

# Default admin email (auto-created on first boot)
# ADMIN_EMAIL=admin@example.com

# Admin password (only used on first setup)
# ADMIN_PASSWORD=change-me-please

# ============================================================================
# STORAGE SETTINGS (Future)
# ============================================================================

# Path to book PDFs (for ingestion)
# BOOK_STORAGE_PATH=./canon

# Path to artifacts (book index, taxonomy, etc.)
# ARTIFACTS_PATH=./artifacts

# ============================================================================
# RATE LIMITING
# ============================================================================

# Ask endpoint: requests per minute
RATE_LIMIT_ASK=10

# Chat endpoint: requests per minute
RATE_LIMIT_CHAT=30

# ============================================================================
# LOGGING
# ============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format: json, text
LOG_FORMAT=text

# ============================================================================
# EXTERNAL SERVICES (Future)
# ============================================================================

# Email service (for notifications, password reset)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=noreply@alexandria.com

# Redis (for caching, if needed)
# REDIS_URL=redis://localhost:6379/0

# Sentry (error tracking)
# SENTRY_DSN=https://...@sentry.io/...

# Analytics
# PLAUSIBLE_DOMAIN=yourdomain.com

# ============================================================================
# NOTES
# ============================================================================

# 1. NEVER commit .env to git (it's in .gitignore)
# 2. In production, set env vars directly in your hosting platform:
#    - Render: Environment tab
#    - Fly.io: fly secrets set KEY=value
#    - Vercel: Settings â†’ Environment Variables
# 3. Rotate SESSION_SECRET regularly
# 4. Use separate databases for dev/staging/prod
# 5. Test with USE_MOCK_AGENTS=true before enabling LLM
